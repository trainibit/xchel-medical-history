-- public.chronic_diseases definition
-- Drop table
-- DROP TABLE public.chronic_diseases;
CREATE TABLE public.chronic_diseases (
                                         id int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
                                         "uuid" uuid NOT NULL,
                                         "name" varchar NOT NULL,
                                         created_date timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
                                         updated_date timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
                                         active bool NOT NULL,
                                         CONSTRAINT chronic_diseases_pk PRIMARY KEY (id),
                                         CONSTRAINT chronic_diseases_unique UNIQUE (uuid),
                                         CONSTRAINT chronic_diseases_unique_1 UNIQUE (name)
);
-- public.medical_records definition
-- Drop table
-- DROP TABLE public.medical_records;
CREATE TABLE public.medical_records (
                                        id int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
                                        "uuid" uuid NOT NULL,
                                        allergies varchar NOT NULL,
                                        weight float4 NULL,
                                        "size" float4 NOT NULL,
                                        blood_pressure varchar NULL,
                                        heart_rate varchar NULL,
                                        last_medical_prescription_uuid int8 NOT NULL,
                                        created_date timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
                                        updated_date timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
                                        patient_uuid uuid NOT NULL,
                                        active bool NOT NULL,
                                        CONSTRAINT medical_history_pk PRIMARY KEY (id),
                                        CONSTRAINT medical_history_unique UNIQUE (uuid),
                                        CONSTRAINT medical_history_unique_1 UNIQUE (allergies),
                                        CONSTRAINT medical_records_unique UNIQUE (last_medical_prescription_uuid),
                                        CONSTRAINT medical_records_unique_1 UNIQUE (patient_uuid)
);
-- public.diseases_by_clinical_history definition
-- Drop table
-- DROP TABLE public.diseases_by_clinical_history;
CREATE TABLE public.diseases_by_clinical_history (
                                                     id int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
                                                     "uuid" uuid NOT NULL,
                                                     clinical_history_id int8 NOT NULL,
                                                     chronic_disease_id int8 NOT NULL,
                                                     created_date timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
                                                     updated_date timestamp DEFAULT CURRENT_TIMESTAMP NOT NULL,
                                                     active bool NOT NULL,
                                                     CONSTRAINT diseases_by_clinical_history_pk PRIMARY KEY (id),
                                                     CONSTRAINT diseases_by_clinical_history_unique UNIQUE (uuid),
                                                     CONSTRAINT diseases_by_clinical_history_unique_1 UNIQUE (clinical_history_id),
                                                     CONSTRAINT diseases_by_clinical_history_unique_2 UNIQUE (chronic_disease_id),
                                                     CONSTRAINT diseases_by_clinical_history_chronic_diseases_fk FOREIGN KEY (chronic_disease_id) REFERENCES public.chronic_diseases(id),
                                                     CONSTRAINT diseases_by_clinical_history_medical_records_fk FOREIGN KEY (clinical_history_id) REFERENCES public.medical_records(id)
);